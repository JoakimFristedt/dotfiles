set rtp+=~/.vim/bundle/Vundle.vim
call vundle#begin()
Plugin 'gmarik/Vundle.vim'
Plugin 'scrooloose/syntastic'
Plugin 'nvie/vim-flake8'
Plugin 'kien/ctrlp.vim'
Plugin 'altercation/vim-colors-solarized'
Plugin 'scrooloose/nerdtree'
Plugin 'tpope/vim-surround'
Plugin 'vim-airline/vim-airline'
Plugin 'vim-airline/vim-airline-themes'
Plugin 'easymotion/vim-easymotion'
Plugin 'haya14busa/incsearch.vim'
Plugin 'haya14busa/incsearch-fuzzy.vim'
Plugin 'haya14busa/incsearch-easymotion.vim'
Plugin 'tmux-plugins/vim-tmux'
Plugin 'tpope/vim-repeat'
Plugin 'Valloric/YouCompleteMe'
Plugin 'gcmt/wildfire.vim'
Plugin '907th/vim-auto-save'
Plugin 'simnalamburt/vim-mundo'
Plugin 'majutsushi/tagbar' " sudo apt-get install ctags
Plugin 'elzr/vim-json'
Plugin 'mkitt/tabline.vim'
Plugin 'AndrewRadev/linediff.vim'
Plugin 'godlygeek/tabular'
call vundle#end()

set nocompatible
filetype plugin indent on
filetype off
"syntax on
if has("syntax")
  syntax on
endif
set undodir=$HOME/.vim/undos
set undofile
set directory=$HOME/.vim/swap " no more swapfiles in the same directory
set noswapfile
set backupdir=$HOME/.vim/backups " no more backupfiles in the same directory
set backupskip=/tmp/*,/private/tmp/* " http://vim.wikia.com/wiki/Editing_crontab
set backup
set linespace=0
set splitbelow
set splitright
set tabstop=4
set expandtab
set shiftwidth=4
set visualbell
set ttyfast
set laststatus=2
set hlsearch
set ignorecase
set smartcase
set foldmethod=indent
set foldlevel=99
set encoding=utf-8
set clipboard=unnamedplus
set backspace=indent,eol,start
set number
set shortmess=atI
set t_Co=256

" searches use normal regexes
"nnoremap / /\v
"vnoremap / /\v

"autocmd BufEnter * silent! lcd %:p:h
autocmd VimEnter * NERDTree
autocmd VimEnter * wincmd w
autocmd FileType yaml setlocal ts=2 sts=2 sw=2 expandtab
autocmd FileType json setlocal ts=2 sts=2 sw=2 expandtab

let g:solarized_termtrans=1
let g:solarized_termcolors=256
let g:solarized_visibility='high'
let g:solarized_contrast='high'
colorscheme solarized
set background=dark

let g:airline_powerline_fonts=1
let g:airline_solarized_bg='dark'
"let g:airline#extensions#tabline#enabled=1
let g:airline_left_sep=''
let g:airline_right_sep=''

let python_highlight_all=1

let NERDTreeMinimalUI=1
let NERDTreeDirArrows=1
let NERDTreeAutoDeleteBuffer=1
let g:NERDTreeHijackNetrw=1
let NERDTreeIgnore = ['\.pyc$', '\.class$']
au VimEnter NERD_tree_1 enew | execute 'NERDTree '.argv()[0]
" Leader=Space
let mapleader=" "
let g:ctrlp_cmd='CtrlPBuffer'

let g:wildfire_objects = ["iW", "i'", 'i"', "i)", "i]", "i}", "ip", "it"]

let g:auto_save=1
let g:auto_save_in_insert_mode=0
let g:auto_save_silent=1

let g:mundo_right=1
let g:mundo_close_on_revert=1

let g:vim_json_syntax_conceal=2

" <Leader>f{char} to move to {char}
map  <leader>f <Plug>(easymotion-bd-f)
nmap <leader>f <Plug>(easymotion-overwin-f)

" Move to line
map <leader>L <Plug>(easymotion-bd-jk)
nmap <leader>L <Plug>(easymotion-overwin-line)

" Move to word
map  <leader>w <Plug>(easymotion-bd-w)
nmap <leader>w <Plug>(easymotion-overwin-w)

map <leader>/ <Plug>(incsearch-fuzzy-/)

noremap <silent><expr> <Leader>/ incsearch#go(<SID>config_easyfuzzymotion())
noremap H ^
noremap L $
nnoremap <C-J> <C-W><C-J>
nnoremap <C-K> <C-W><C-K>
nnoremap <C-L> <C-W><C-L>
nnoremap <C-H> <C-W><C-H>
nnoremap <BS> :nohlsearch<CR>
nnoremap <C-N> :MundoToggle<CR>
nnoremap <leader>1 1gt<CR>
nnoremap <leader>2 2gt<CR>
nnoremap <leader>3 3gt<CR>

inoremap <Up> <Nop>
inoremap <Down> <Nop>
inoremap <Left> <Nop>
inoremap <Right> <Nop>
"inoremap <BS> <Nop>
inoremap jj <ESC>

vnoremap < <gv
vnoremap > >gv

nmap <silent> <C-T> :NERDTreeToggle<CR>
nmap <leader>q :q<CR>
nmap <leader>Q :qa<CR>
nmap <leader>+ zo
nmap <leader>- zc
nmap <leader>l :tabnext<CR>
nmap <leader>h :tabprevious<CR>

" Toggle invisible chars
map <leader>tl :set list!<CR>
map <leader>r :NERDTreeFind<cr>
nmap <leader>a <Plug>(wildfire-quick-select)
nmap <F8> :TagbarToggle<CR>

autocmd Filetype sh nnoremap <leader>b :!bash % <CR>

" fuzzy-search with EasyMotion
function! s:config_easyfuzzymotion(...) abort
  return extend(copy({
  \   'converters': [incsearch#config#fuzzyword#converter()],
  \   'modules': [incsearch#config#easymotion#module({'overwin': 1})],
  \   'keymap': {"\<CR>": '<Over>(easymotion)'},
  \   'is_expr': 0,
  \   'is_stay': 1
  \ }), get(a:, 1, {}))
endfunction
